webpackJsonp([1],{"0tCM":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"FoodPicker"},[t._m(0),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group",attrs:{id:"budgetSelect"}},[a("label",{attrs:{for:"budget"}},[t._v("💰 預算範圍")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectBudgeItem,expression:"selectBudgeItem"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectBudgeItem=e.target.multiple?a:a[0]}}},t._l(t.budgets,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.text))])}))])]),a("div",{staticClass:"row"},[a("div",{staticClass:"form-group",attrs:{id:"budgetSelect"}},[a("label",{attrs:{for:"budget"}},[t._v("😋 種類")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectCatItem,expression:"selectCatItem"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectCatItem=e.target.multiple?a:a[0]}}},t._l(t.categories,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.text))])}))])]),a("div",{staticClass:"row"},[t._m(1),a("div",{staticClass:"slotButton"},[!1===t.randomShow&&t.isReady?a("button",{staticClass:"start",on:{click:t.clickStart}},[t._v("STAR")]):t._e(),t.randomShow?a("button",{ref:"stopBtn",staticClass:"stop",on:{click:t.clickStop}},[t._v("STOP")]):t._e()])]),a("div",{staticClass:"row"},[t.selected?a("ShowFeedback",{attrs:{recordsRef:t.recordsRef,feedbackStores:t.stores,selectedStore:t.randomResult}}):t._e()],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("h3",{staticClass:"sectionTitle"},[t._v("What to eat ?")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slotMachine outerContainer"},[a("div",{staticClass:"innerContainer"},[a("div",{staticClass:"foodResult"},[a("ul",[a("li",[t._v("今天吃啥？")])])]),a("div",{staticClass:"slotButton"},[a("div",{staticClass:"slotTop"}),a("div",{staticClass:"slotBody"})])])])}],n={render:s,staticRenderFns:r};e.a=n},"3YPZ":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],n={render:s,staticRenderFns:r};e.a=n},"58qf":function(t,e){},"8aDi":function(t,e,a){"use strict";e.a={name:"feedback",props:["selectedStore","filterShow","userData","recordsRef"],data:function(){return{newComment:{content:"",name:this.userData.displayName,photoURL:this.userData.photoURL,storeName:this.selectedStore}}},watch:{selectedStore:function(t){this.newComment.storeName=t}},methods:{addComment:function(){this.recordsRef.push(this.newComment)}}}},"8hxi":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ShowFeedback"},[a("div",{staticClass:"panel panel-defalf"},[a("div",{staticClass:"panel-heading"},[t._v("評論")]),a("div",{staticClass:"panel-body"},[a("table",{staticClass:"table table-striped"},[a("tbody",t._l(t.records,function(e){return a("tr",[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.content))])])}))])])])])},r=[],n={render:s,staticRenderFns:r};e.a=n},Bws9:function(t,e){},DQVb:function(t,e,a){"use strict";var s=a("N6/j");e.a={name:"foodPicker",components:{ShowFeedback:s.a},props:["stores","isReady","recordsRef"],mounted:function(){},data:function(){var t=[{text:"0 ~ 100",low:0,high:100},{text:"100 ~ 150",low:100,high:150},{text:"150 ~ 200",low:150,high:200},{text:"200 up",low:200,high:1e3}],e=[{text:"正餐",type:"meal"},{text:"飲料",type:"drink"}];return{budgets:t,categories:e,randomShow:!1,timerId:"",selectBudgeItem:t[0],selectCatItem:e[0],selected:!1,randomResult:""}},computed:{filteredStores:function(){return this.stores.filter(this.filterStore)}},methods:{filterStore:function(t){return t.price>=this.selectBudgeItem.low&&t.price<=this.selectBudgeItem.high&&t.type==this.selectCatItem.type},clickStart:function(){document.querySelector(".foodResult ul li");this.randomShow=!0,this.selected=!1,this.timerId=setInterval(this.interValFunc,100)},interValFunc:function(){var t=document.querySelector(".foodResult ul li"),e=this.filteredStores[Math.floor(Math.random()*this.filteredStores.length)],a="";if(void 0===e)return t.innerHTML="沒這個選項",clearInterval(this.timerId),this.$refs.stopBtn.click(),void(this.selected=!1);a=e.name,this.randomShow||clearInterval(this.timerId),t.innerHTML=a,this.randomResult=a},clickStop:function(){this.randomShow=!1,this.selected=!0}}}},G6fL:function(t,e,a){"use strict";function s(t){a("U883")}var r=a("DQVb"),n=a("0tCM"),i=a("VU/8"),o=s,c=i(r.a,n.a,o,"data-v-ef3d6b2c",null);e.a=c.exports},IjLF:function(t,e,a){"use strict";e.a={name:"showFeedback",props:["userData","selectedStore","recordsRef"],watch:{selectedStore:function(t){this.$bindAsArray("records",this.recordsRef.orderByChild("storeName").equalTo(t))}},mounted:function(){this.$bindAsArray("records",this.recordsRef.orderByChild("storeName").equalTo(this.selectedStore))},data:function(){return{records:[]}}}},KlKF:function(t,e,a){"use strict";var s=a("q6Ae"),r=a.n(s),n=a("XUlc"),i=a("bGVZ"),o=a("G6fL"),c=a("QmSG"),u=r.a.initializeApp(c.a),l=u.database(),d=l.ref("stores");e.a={name:"homepage",components:{AppNavBar:n.a,FoodPicker:o.a,FeedbackPage:i.a},data:function(){return{auth:r.a.auth(),stores:[],isReady:!1,isAuth:!1,isPicker:!0,userData:{photoURL:"",displayName:""},recordsRef:l.ref("records")}},mounted:function(){var t=this;this.stores=this.getInitStoreData(),r.a.auth().onAuthStateChanged(function(e){e?(console.log("User has signed in"),t.isAuth=!0,t.userData.photoURL=e.photoURL,t.userData.displayName=e.displayName):(console.log("User signed out"),t.isAuth=!1)})},methods:{doFeedback:function(){this.isPicker=!1},getInitStoreData:function(){var t=[],e=this;return d.once("value",function(a){a.forEach(function(e){t.push(e.val())}),e.isReady=!0}),t}}}},LZNS:function(t,e,a){"use strict";var s=a("q6Ae"),r=a.n(s);e.a={mounted:function(){},props:["auth","isAuth","userData"],methods:{routeToPicker:function(){this.$router.push("/")},routeToFeedback:function(){this.$emit("feedback")},routeToAbout:function(){this.$router.push("/about")},signIn:function(){var t=new r.a.auth.GoogleAuthProvider;this.auth.signInWithPopup(t)},signOut:function(){this.auth.signOut()}}}},M93x:function(t,e,a){"use strict";function s(t){a("RPOv")}var r=a("xJD8"),n=a("3YPZ"),i=a("VU/8"),o=s,c=i(r.a,n.a,o,null,null);e.a=c.exports},Mob5:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"FeedbackPage"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchString,expression:"searchString"}],staticClass:"search form-control",attrs:{placeholder:"Search the store"},domProps:{value:t.searchString},on:{input:function(e){e.target.composing||(t.searchString=e.target.value)}}}),a("div",{attrs:{id:"searchResult"}},[a("ul",t._l(t.filteredStoresName,function(e){return a("li",{model:{value:t.selectedStore,callback:function(e){t.selectedStore=e},expression:"selectedStore"}},[a("a",{on:{click:t.dispalySelectedStore}},[t._v(t._s(e.name))])])}))]),t.filterShow?a("Feedback",{attrs:{userData:t.userData,recordsRef:t.recordsRef,stores:t.stores,selectedStore:t.selectedStore,filterShow:t.filterShow}}):t._e(),t.filterShow?a("ShowFeedback",{attrs:{stores:t.stores,recordsRef:t.recordsRef,selectedStore:t.selectedStore}}):t._e()],1)},r=[],n={render:s,staticRenderFns:r};e.a=n},"N6/j":function(t,e,a){"use strict";function s(t){a("Oywb")}var r=a("IjLF"),n=a("8hxi"),i=a("VU/8"),o=s,c=i(r.a,n.a,o,"data-v-fd599e00",null);e.a=c.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),r=a("M93x"),n=a("YaEn"),i=a("1mcD"),o=a.n(i);s.a.use(o.a),s.a.config.productionTip=!1,new s.a({el:"#app",router:n.a,template:"<App/>",components:{App:r.a}})},OZEi:function(t,e,a){"use strict";function s(t){a("58qf")}var r=a("8aDi"),n=a("axh+"),i=a("VU/8"),o=s,c=i(r.a,n.a,o,null,null);e.a=c.exports},Oept:function(t,e){},Oywb:function(t,e){},Qfom:function(t,e,a){"use strict";function s(t){a("Oept")}var r=a("KlKF"),n=a("r/qS"),i=a("VU/8"),o=s,c=i(r.a,n.a,o,null,null);e.a=c.exports},QmSG:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var s={apiKey:"AIzaSyBEYcYW4zbye38aFfiRYiC25hKyp9-4WNc",authDomain:"whattoeat-f36a5.firebaseapp.com",databaseURL:"https://whattoeat-f36a5.firebaseio.com",projectId:"whattoeat-f36a5",storageBucket:"whattoeat-f36a5.appspot.com",messagingSenderId:"229539569797"}},RPOv:function(t,e){},U883:function(t,e){},Ulwj:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AppNavBar"},[a("nav",{staticClass:"navbar navbar-default"},[t._m(0),a("div",{staticClass:"navbar-collapse collapse",attrs:{id:"navbar1"}},[a("ul",{staticClass:"nav navbar-nav"},[a("li",[a("a",{on:{click:t.routeToAbout}},[t._v("About")])]),a("li",[t.isAuth?a("a",{on:{click:t.routeToFeedback}},[t._v("Feedback")]):t._e()]),t.isAuth?t._e():a("li",{staticClass:"button",on:{click:function(e){e.preventDefault(),t.signIn(e)}}},[a("a",{attrs:{href:"/"}},[t._v("Sign In")])]),t.isAuth?a("li",{staticClass:"button",on:{click:function(e){e.preventDefault(),t.signOut(e)}}},[a("a",{attrs:{href:"/"}},[t._v("Sign Out")])]):t._e(),a("li",[t.isAuth?a("div",{style:{backgroundImage:"url("+t.userData.photoURL+")"},attrs:{id:"user-pic"}}):t._e()]),a("li",[t.isAuth?a("div",{attrs:{id:"user-name",value:t.userData.displayName}},[t._v(t._s(t.userData.displayName))]):t._e()])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navbar-header"},[a("button",{staticClass:"navbar-toggle collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbar1"}},[a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"})]),a("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[a("span",{staticClass:"active brandTitle"},[t._v("Let's Lunch")])])])}],n={render:s,staticRenderFns:r};e.a=n},XUlc:function(t,e,a){"use strict";function s(t){a("qRng")}var r=a("LZNS"),n=a("Ulwj"),i=a("VU/8"),o=s,c=i(r.a,n.a,o,null,null);e.a=c.exports},YaEn:function(t,e,a){"use strict";var s=a("7+uW"),r=a("/ocq"),n=a("Qfom"),i=a("bGVZ");s.a.use(r.a),e.a=new r.a({mode:"history",routes:[{path:"/",name:"index",component:n.a},{path:"/feedback",name:"feedback",component:i.a}]})},"axh+":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Feedback"},[a("div",{staticClass:"panel panel-default",attrs:{id:"feedbackForm"}},[a("div",{staticClass:"panel-heading"},[a("h4",{staticClass:"sectionTitle"},[t._v(t._s(t.filterShow?t.selectedStore:"店名"))])]),a("div",{staticClass:"panel-body"},[a("form",{staticClass:"form-inline",attrs:{id:"form"},on:{submit:function(e){e.preventDefault(),t.addComment(e)}}},[a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment.content,expression:"newComment.content"}],staticClass:"form-control",attrs:{id:"storeFeedback",type:"text"},domProps:{value:t.newComment.content},on:{input:function(e){e.target.composing||(t.newComment.content=e.target.value)}}})]),a("input",{staticClass:"btn btn-primary",attrs:{id:"submit",type:"submit",value:"AddFeedback"}})])])])])},r=[],n={render:s,staticRenderFns:r};e.a=n},bGVZ:function(t,e,a){"use strict";function s(t){a("Bws9")}var r=a("umbT"),n=a("Mob5"),i=a("VU/8"),o=s,c=i(r.a,n.a,o,null,null);e.a=c.exports},qRng:function(t,e){},"r/qS":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Homepage"},[a("AppNavBar",{attrs:{auth:t.auth,isAuth:t.isAuth,userData:t.userData,isPicker:t.isPicker},on:{feedback:t.doFeedback}}),t.isPicker?a("FoodPicker",{attrs:{stores:t.stores,recordsRef:t.recordsRef,isReady:t.isReady,userData:t.userData}}):t._e(),t.isPicker?t._e():a("FeedbackPage",{attrs:{recordsRef:t.recordsRef,stores:t.stores,userData:t.userData}})],1)},r=[],n={render:s,staticRenderFns:r};e.a=n},umbT:function(t,e,a){"use strict";var s=a("XUlc"),r=a("OZEi"),n=a("N6/j"),i=a("q6Ae"),o=a.n(i),c=a("QmSG"),u=o.a.initializeApp(c.a,"feedbackApp");u.database();e.a={name:"FeedbackPage",components:{AppNavBar:s.a,Feedback:r.a,ShowFeedback:n.a},props:["stores","userData","recordsRef"],mounted:function(){},data:function(){return{searchString:"",filterShow:!1,selectedStore:"",currentNode:[]}},computed:{filteredStoresName:function(){return this.stores.filter(this.filterStore)}},methods:{filterStore:function(t){return-1!==t.name.toLowerCase().indexOf(this.searchString.trim().toLowerCase())},dispalySelectedStore:function(t){this.filterShow=!0,this.selectedStore=t.target.innerHTML}}}},xJD8:function(t,e,a){"use strict";e.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.47774d47f4907297aa7e.js.map